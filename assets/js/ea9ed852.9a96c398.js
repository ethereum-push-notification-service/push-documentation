"use strict";(self.webpackChunkpush_doc_hub_v_2=self.webpackChunkpush_doc_hub_v_2||[]).push([[8393],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>m});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},s=Object.keys(e);for(a=0;a<s.length;a++)n=s[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)n=s[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=a.createContext({}),u=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},c=function(e){var t=u(e.components);return a.createElement(l.Provider,{value:t},e.children)},p="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},h=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,s=e.originalType,l=e.parentName,c=o(e,["components","mdxType","originalType","parentName"]),p=u(n),h=r,m=p["".concat(l,".").concat(h)]||p[h]||d[h]||s;return n?a.createElement(m,i(i({ref:t},c),{},{components:n})):a.createElement(m,i({ref:t},c))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var s=n.length,i=new Array(s);i[0]=h;var o={};for(var l in t)hasOwnProperty.call(t,l)&&(o[l]=t[l]);o.originalType=e,o[p]="string"==typeof e?e:r,i[1]=o;for(var u=2;u<s;u++)i[u]=n[u];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}h.displayName="MDXCreateElement"},5162:(e,t,n)=>{n.d(t,{Z:()=>i});var a=n(7294),r=n(6010);const s={tabItem:"tabItem_Ymn6"};function i(e){let{children:t,hidden:n,className:i}=e;return a.createElement("div",{role:"tabpanel",className:(0,r.Z)(s.tabItem,i),hidden:n},t)}},4866:(e,t,n)=>{n.d(t,{Z:()=>A});var a=n(7462),r=n(7294),s=n(6010),i=n(2466),o=n(6550),l=n(1980),u=n(7392),c=n(12);function p(e){return function(e){return r.Children.map(e,(e=>{if(!e||(0,r.isValidElement)(e)&&function(e){const{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}(e).map((e=>{let{props:{value:t,label:n,attributes:a,default:r}}=e;return{value:t,label:n,attributes:a,default:r}}))}function d(e){const{values:t,children:n}=e;return(0,r.useMemo)((()=>{const e=t??p(n);return function(e){const t=(0,u.l)(e,((e,t)=>e.value===t.value));if(t.length>0)throw new Error(`Docusaurus error: Duplicate values "${t.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[t,n])}function h(e){let{value:t,tabValues:n}=e;return n.some((e=>e.value===t))}function m(e){let{queryString:t=!1,groupId:n}=e;const a=(0,o.k6)(),s=function(e){let{queryString:t=!1,groupId:n}=e;if("string"==typeof t)return t;if(!1===t)return null;if(!0===t&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:t,groupId:n});return[(0,l._X)(s),(0,r.useCallback)((e=>{if(!s)return;const t=new URLSearchParams(a.location.search);t.set(s,e),a.replace({...a.location,search:t.toString()})}),[s,a])]}function b(e){const{defaultValue:t,queryString:n=!1,groupId:a}=e,s=d(e),[i,o]=(0,r.useState)((()=>function(e){let{defaultValue:t,tabValues:n}=e;if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(t){if(!h({value:t,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${t}" but none of its children has the corresponding value. Available values are: ${n.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return t}const a=n.find((e=>e.default))??n[0];if(!a)throw new Error("Unexpected error: 0 tabValues");return a.value}({defaultValue:t,tabValues:s}))),[l,u]=m({queryString:n,groupId:a}),[p,b]=function(e){let{groupId:t}=e;const n=function(e){return e?`docusaurus.tab.${e}`:null}(t),[a,s]=(0,c.Nk)(n);return[a,(0,r.useCallback)((e=>{n&&s.set(e)}),[n,s])]}({groupId:a}),g=(()=>{const e=l??p;return h({value:e,tabValues:s})?e:null})();(0,r.useLayoutEffect)((()=>{g&&o(g)}),[g]);return{selectedValue:i,selectValue:(0,r.useCallback)((e=>{if(!h({value:e,tabValues:s}))throw new Error(`Can't select invalid tab value=${e}`);o(e),u(e),b(e)}),[u,b,s]),tabValues:s}}var g=n(2389);const f={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};function v(e){let{className:t,block:n,selectedValue:o,selectValue:l,tabValues:u}=e;const c=[],{blockElementScrollPositionUntilNextRender:p}=(0,i.o5)(),d=e=>{const t=e.currentTarget,n=c.indexOf(t),a=u[n].value;a!==o&&(p(t),l(a))},h=e=>{let t=null;switch(e.key){case"Enter":d(e);break;case"ArrowRight":{const n=c.indexOf(e.currentTarget)+1;t=c[n]??c[0];break}case"ArrowLeft":{const n=c.indexOf(e.currentTarget)-1;t=c[n]??c[c.length-1];break}}t?.focus()};return r.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,s.Z)("tabs",{"tabs--block":n},t)},u.map((e=>{let{value:t,label:n,attributes:i}=e;return r.createElement("li",(0,a.Z)({role:"tab",tabIndex:o===t?0:-1,"aria-selected":o===t,key:t,ref:e=>c.push(e),onKeyDown:h,onClick:d},i,{className:(0,s.Z)("tabs__item",f.tabItem,i?.className,{"tabs__item--active":o===t})}),n??t)})))}function y(e){let{lazy:t,children:n,selectedValue:a}=e;const s=(Array.isArray(n)?n:[n]).filter(Boolean);if(t){const e=s.find((e=>e.props.value===a));return e?(0,r.cloneElement)(e,{className:"margin-top--md"}):null}return r.createElement("div",{className:"margin-top--md"},s.map(((e,t)=>(0,r.cloneElement)(e,{key:t,hidden:e.props.value!==a}))))}function k(e){const t=b(e);return r.createElement("div",{className:(0,s.Z)("tabs-container",f.tabList)},r.createElement(v,(0,a.Z)({},e,t)),r.createElement(y,(0,a.Z)({},e,t)))}function A(e){const t=(0,g.Z)();return r.createElement(k,(0,a.Z)({key:String(t)},e))}},7882:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>l,default:()=>m,frontMatter:()=>o,metadata:()=>u,toc:()=>p});var a=n(7462),r=(n(7294),n(3905)),s=n(4866),i=n(5162);const o={id:"dev-chat-all-api-calls",title:"All API Calls",hide_title:!0,slug:"./all-api-calls",displayed_sidebar:"pushChatSidebar",sidebar_position:13},l="All API Calls",u={unversionedId:"dev/chat/build/dev-chat-all-api-calls",id:"dev/chat/build/dev-chat-all-api-calls",title:"All API Calls",description:"This tutorial is designed to get you up and going by providing a step wise guide to use and explore the Push SDK.",source:"@site/docs/dev/chat/build/13-All-API-Calls.mdx",sourceDirName:"dev/chat/build",slug:"/dev/chat/build/all-api-calls",permalink:"/dev/chat/build/all-api-calls",draft:!1,editUrl:"https://github.com/ethereum-push-notification-service/push-documentation/docs/dev/chat/build/13-All-API-Calls.mdx",tags:[],version:"current",sidebarPosition:13,frontMatter:{id:"dev-chat-all-api-calls",title:"All API Calls",hide_title:!0,slug:"./all-api-calls",displayed_sidebar:"pushChatSidebar",sidebar_position:13},sidebar:"pushChatSidebar",previous:{title:"Stream Chats",permalink:"/dev/chat/build/stream-chats"},next:{title:"Message Types",permalink:"/dev/chat/message-types"}},c={},p=[{value:"Step 1 - Setup and Installation",id:"step-1---setup-and-installation",level:2},{value:"Step 2 - Initialize User",id:"step-2---initialize-user",level:2},{value:"Step 3 - Navigating User Profile Functionality",id:"step-3---navigating-user-profile-functionality",level:2},{value:"Step 4 - Navigating Chat Functionality",id:"step-4---navigating-chat-functionality",level:2},{value:"Step 5 - Navigating Group Chat Functionality",id:"step-5---navigating-group-chat-functionality",level:2},{value:"Step 6 - Navigating User Encryption Functionality",id:"step-6---navigating-user-encryption-functionality",level:2}],d={toc:p},h="wrapper";function m(e){let{components:t,...n}=e;return(0,r.kt)(h,(0,a.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"all-api-calls"},"All API Calls"),(0,r.kt)("p",null,"This tutorial is designed to get you up and going by providing a step wise guide to use and explore the Push SDK."),(0,r.kt)("head",null,(0,r.kt)("title",null,"Push SDK APIs playground tutorial | Push Chat | Push Documentation")),(0,r.kt)("h2",{id:"step-1---setup-and-installation"},"Step 1 - Setup and Installation"),(0,r.kt)("p",null,"Start by setting up the project environment and installing the SDK and its required peer dependencies ( ethersV5 )."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"}," Note - ")," For this tutorial we will be using plain Javascript"),(0,r.kt)(s.Z,{className:"codetabs",groupId:"code-examples",mdxType:"Tabs"},(0,r.kt)(i.Z,{value:"js",attributes:{className:"codetab js"},default:!0,mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"# Create Project Directory\nmkdir push-sdk-tutorial\n\n# Navigate to Project Directory\ncd push-sdk-tutorial\n\n# Initialize Project\nnpm init -y\n\n# Create index.mjs File\ntouch index.mjs\n\n# Install Required Libraries\nnpm install @pushprotocol/restapi@latest @pushprotocol/socket@latest ethers@^5.7\n\n")))),(0,r.kt)("h2",{id:"step-2---initialize-user"},"Step 2 - Initialize User"),(0,r.kt)("p",null,"Initialization is a crucial step before utilizing the SDK. It involves creating a Push Profile for new users or re-authenticating and decrypting keys for existing users."),(0,r.kt)(s.Z,{className:"codetabs",groupId:"code-examples",mdxType:"Tabs"},(0,r.kt)(i.Z,{value:"js",attributes:{className:"codetab js"},default:!0,mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"// index.mjs\n\nimport { PushAPI } from '@pushprotocol/restapi'\nimport { ethers } from 'ethers'\n\n/**\n * Private key of the user can be exported from any wallet such as Metamask\n * Note - One should use a .env file to store the private key and make sure it is not committed to the repository\n * Ideal code - const signer = new ethers.Wallet(`0x${prcoess.env.PRIVATE_KEY}`)\n * For this tutorial we will be using a random private key\n */\nconst aliceSigner = new ethers.Wallet.createRandom()\nconst aliceAddress = await aliceSigner.getAddress()\n\nconst bobSigner = new ethers.Wallet.createRandom()\nconst bobAddress = await bobSigner.getAddress()\n\n/** Initialization */\nconst userAlice = await PushAPI.initialize(aliceSigner, { env: 'prod' })\nconst userBob = await PushAPI.initialize(bobSigner, { env: 'prod' })\n\n/** Get details of the initialized user */\nconst userAliceInfo = await userAlice.info()\n")))),(0,r.kt)("h2",{id:"step-3---navigating-user-profile-functionality"},"Step 3 - Navigating User Profile Functionality"),(0,r.kt)("p",null,"Push SDK provides getters and setters related to the user's profile, which can be utilized to display user profile information in your UI and enable users to change their profile information effortlessly."),(0,r.kt)(s.Z,{className:"codetabs",groupId:"code-examples",mdxType:"Tabs"},(0,r.kt)(i.Z,{value:"js",attributes:{className:"codetab js"},default:!0,mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"// index.mjs\n...\n...\n\n/**\n * User Profile Functions\n */\n\n/** Get Profile Info such as name, image etc */\nconst userAliceProfileInfo = await userAlice.profile.info()\n\n/** Set Profile Info such as name, image etc */\nconst updatedUserAliceProfileInfo = await userAlice.profile.update({\n  name: 'Alice',\n})\n")))),(0,r.kt)("h2",{id:"step-4---navigating-chat-functionality"},"Step 4 - Navigating Chat Functionality"),(0,r.kt)("p",null,"Push SDK provides various functions for sending chat messages, receiving, accepting or rejecting chat invites"),(0,r.kt)(s.Z,{className:"codetabs",groupId:"code-examples",mdxType:"Tabs"},(0,r.kt)(i.Z,{value:"js",attributes:{className:"codetab js"},default:!0,mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"// index.mjs\n...\n...\n/**\n * Push Chat Functions\n */\n\n/** Send Chat message to another user */\n// Note - This message will be sent as a request to the receiver who needs to accept or reject it\nconst aliceMessagesBob = await userAlice.chat.send(bobAddress, {\n  content: 'Gm Gm !!!',\n  type: 'Text',\n})\n\n/** Get list of all chats done by user */\nconst userAliceChats = await userAlice.chat.list('CHATS')\n\n/** Get list of all chat requests received by user */\nconst userAliceRequests = await userAlice.chat.list('REQUESTS')\n\n/** Get latest chat message of a specific chat */\nconst aliceLatestChatWithBob = await userAlice.chat.latest(bobAddress)\n\n/** Get historical chat message of a specific chat */\nconst aliceHistoricalChatWithBob = await userAlice.chat.history(bobAddress)\n\n/** Accept chat request */\nconst bobAcceptsAliceChatRequest = await userBob.chat.accept(aliceAddress)\n\n/** Reject chat request */\n// Setup\nconst tempSigner = new ethers.Wallet.createRandom()\nconst tempAddress = await tempSigner.getAddress()\nconst userTemp = await PushAPI.initialize(tempSigner, { env: 'prod' })\nconst tempMessageBob = await userTemp.chat.send(bobAddress, {\n  content: 'Click this link to get scammed',\n  type: 'Text',\n})\n// Reject\nconst bobRejectsChatRequest = await userBob.chat.reject(tempAddress)\n\n/** Block User */\nconst aliceBlocksBob = await userAlice.chat.block([bobAddress])\n\n/** UnBlock User */\nconst aliceUnblocksBob = await userAlice.chat.unblock([bobAddress])\n\n")))),(0,r.kt)("h2",{id:"step-5---navigating-group-chat-functionality"},"Step 5 - Navigating Group Chat Functionality"),(0,r.kt)("p",null,"Push SDK provides various functions for creation, updation , adding and removing users from group."),(0,r.kt)(s.Z,{className:"codetabs",groupId:"code-examples",mdxType:"Tabs"},(0,r.kt)(i.Z,{value:"js",attributes:{className:"codetab js"},default:!0,mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"// index.mjs\n...\n...\n/**\n * Push Group Chat Functions\n */\n\n/** Create Push Chat Group */\n// Note - By default group creator is the admin of the group\nconst createdGroup = await userAlice.chat.group.create('Sample Grp', {\n  description: 'Same Desc',\n  image: null,\n  members: [],\n  admins: [],\n  private: false,\n})\nconst groupChatId = createdGroup.chatId\n\n/** Update Group Info */\n// Note - Only admin can update group info\nconst updatedGroup = await userAlice.chat.group.update(groupChatId, {\n  description: 'Updated Description',\n})\n\n/** Get Group Info */\nconst groupInfo = await userAlice.chat.group.info(groupChatId)\n\n/** Get group Permissions */\nconst groupPermissions = await userAlice.chat.group.permissions(groupChatId)\n\n/** Add Member to Group */\nconst addMember = await userAlice.chat.group.add(groupChatId, {\n  role: 'MEMBER',\n  accounts: ['0x754E2C9f31D7DB279E9d4A9140e33ad8839E1FAd'],\n})\n\n/** Add Admin to Group */\nconst addAdmin = await userAlice.chat.group.add(groupChatId, {\n  role: 'ADMIN',\n  accounts: [bobAddress],\n})\n\n/** Remove Member from Group */\nconst removeMember = await userAlice.chat.group.remove(groupChatId, {\n  role: 'MEMBER',\n  accounts: ['0x754E2C9f31D7DB279E9d4A9140e33ad8839E1FAd'],\n})\n\n/** Remove Admin from Group */\nconst removeAdmin = await userAlice.chat.group.remove(groupChatId, {\n  role: 'ADMIN',\n  accounts: [bobAddress],\n})\n\n/** Join Group */\n// Note - A user can only join a group if its public or if the user is invited to join the group\nconst joinGrp = await userBob.chat.group.join(groupChatId)\n\n/** Leave Group */\nconst leaveGrp = await userBob.chat.group.leave(groupChatId)\n\n/** Reject a Group Joining Invite */\n// Setup\nconst newGroup = await userAlice.chat.group.create('Tmp Grp', {\n  description: 'Tmp Desc',\n  image: null,\n  members: [bobAddress],\n  admins: [],\n  private: true,\n})\n// Reject\nconst rejectGrpJoiningReq = await userBob.chat.group.reject(newGroup.chatId)\n\n")))),(0,r.kt)("h2",{id:"step-6---navigating-user-encryption-functionality"},"Step 6 - Navigating User Encryption Functionality"),(0,r.kt)("p",null,"Push SDK provides functions for getting info related to the encryption of a Push profile and also allow to change encryption of user keys"),(0,r.kt)(s.Z,{className:"codetabs",groupId:"code-examples",mdxType:"Tabs"},(0,r.kt)(i.Z,{value:"js",attributes:{className:"codetab js"},default:!0,mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"// index.mjs\n...\n...\n/**\n * Push User Encryption Functions\n */\n\n/** Get User profile encryption info */\nconst encryptionInfo = await userAlice.encryption.info()\n\n/** Update encryption version of Push Profile */\n// Note - This function changes the encryption of push chat encryption keys and need to be called cautiously\nconst PGP_V3 = 'eip191-aes256-gcm-hkdf-sha256'\nconst encryptionUpdate = await userAlice.encryption.update(PGP_V3)\n\n")))))}m.isMDXComponent=!0}}]);